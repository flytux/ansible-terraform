00:08:25 UTC [GreetingsModule] Greetings
00:08:25 UTC message: [kubesphere-worker-1]
Greetings, KubeKey!
00:08:25 UTC message: [kubesphere-master-1]
Greetings, KubeKey!
00:08:25 UTC success: [kubesphere-worker-1]
00:08:25 UTC success: [kubesphere-master-1]
00:08:25 UTC [NodePreCheckModule] A pre-check on nodes
00:08:25 UTC success: [kubesphere-worker-1]
00:08:25 UTC success: [kubesphere-master-1]
00:08:25 UTC [ClusterPreCheckModule] Get KubeConfig file
00:08:25 UTC success: [kubesphere-master-1]
00:08:25 UTC [ClusterPreCheckModule] Get all nodes Kubernetes version
00:08:25 UTC success: [kubesphere-master-1]
00:08:25 UTC success: [kubesphere-worker-1]
00:08:25 UTC [ClusterPreCheckModule] Calculate min Kubernetes version
00:08:25 UTC success: [kubesphere-master-1]
00:08:25 UTC [ClusterPreCheckModule] Check desired Kubernetes version
00:08:25 UTC success: [kubesphere-master-1]
00:08:25 UTC [ClusterPreCheckModule] Check KubeSphere version
00:08:26 UTC success: [kubesphere-master-1]
00:08:26 UTC [ClusterPreCheckModule] Check dependency matrix for KubeSphere and Kubernetes
00:08:26 UTC skipped: [kubesphere-master-1]
00:08:26 UTC [ClusterPreCheckModule] Get kubernetes nodes status
00:08:26 UTC success: [kubesphere-master-1]
00:08:26 UTC [SetUpgradePlanModule 1/2] Set upgrade plan
00:08:26 UTC success: [LocalHost]
00:08:26 UTC [SetUpgradePlanModule 1/2] Generate kubeadm config
00:08:26 UTC success: [kubesphere-master-1]
00:08:26 UTC [ProgressiveUpgradeModule 1/2] Calculate next upgrade version
00:08:26 UTC success: [LocalHost]
00:08:26 UTC [ProgressiveUpgradeModule 1/2] Download installation binaries
00:08:26 UTC message: [localhost]
downloading amd64 kubeadm v1.24.1 ...
00:08:26 UTC message: [localhost]
kubeadm is existed
00:08:26 UTC message: [localhost]
downloading amd64 kubelet v1.24.1 ...
00:08:26 UTC message: [localhost]
kubelet is existed
00:08:26 UTC message: [localhost]
downloading amd64 kubectl v1.24.1 ...
00:08:27 UTC message: [localhost]
kubectl is existed
00:08:27 UTC message: [localhost]
downloading amd64 helm v3.9.0 ...
00:08:27 UTC message: [localhost]
helm is existed
00:08:27 UTC message: [localhost]
downloading amd64 kubecni v1.2.0 ...
00:08:27 UTC message: [localhost]
kubecni is existed
00:08:27 UTC message: [localhost]
downloading amd64 crictl v1.24.0 ...
00:08:27 UTC message: [localhost]
crictl is existed
00:08:27 UTC message: [localhost]
downloading amd64 etcd v3.4.13 ...
00:08:27 UTC message: [localhost]
etcd is existed
00:08:27 UTC message: [localhost]
downloading amd64 containerd 1.6.4 ...
00:08:27 UTC message: [localhost]
containerd is existed
00:08:27 UTC message: [localhost]
downloading amd64 runc v1.1.1 ...
00:08:27 UTC message: [localhost]
runc is existed
00:08:27 UTC message: [localhost]
downloading amd64 calicoctl v3.23.2 ...
00:08:27 UTC message: [localhost]
calicoctl is existed
00:08:27 UTC success: [LocalHost]
00:08:27 UTC [ProgressiveUpgradeModule 1/2] Start to pull images on all nodes
00:08:27 UTC message: [kubesphere-worker-1]
downloading image: kubesphere/pause:3.7
00:08:27 UTC message: [kubesphere-master-1]
downloading image: kubesphere/pause:3.7
00:08:31 UTC message: [kubesphere-master-1]
downloading image: kubesphere/kube-apiserver:v1.24.1
00:08:31 UTC message: [kubesphere-worker-1]
downloading image: kubesphere/kube-proxy:v1.24.1
00:08:33 UTC message: [kubesphere-master-1]
downloading image: kubesphere/kube-controller-manager:v1.24.1
00:08:33 UTC message: [kubesphere-worker-1]
downloading image: coredns/coredns:1.8.6
00:08:34 UTC message: [kubesphere-master-1]
downloading image: kubesphere/kube-scheduler:v1.24.1
00:08:34 UTC message: [kubesphere-worker-1]
downloading image: kubesphere/k8s-dns-node-cache:1.15.12
00:08:36 UTC message: [kubesphere-master-1]
downloading image: kubesphere/kube-proxy:v1.24.1
00:08:36 UTC message: [kubesphere-worker-1]
downloading image: calico/kube-controllers:v3.23.2
00:08:37 UTC message: [kubesphere-master-1]
downloading image: coredns/coredns:1.8.6
00:08:38 UTC message: [kubesphere-worker-1]
downloading image: calico/cni:v3.23.2
00:08:39 UTC message: [kubesphere-master-1]
downloading image: kubesphere/k8s-dns-node-cache:1.15.12
00:08:39 UTC message: [kubesphere-worker-1]
downloading image: calico/node:v3.23.2
00:08:40 UTC message: [kubesphere-master-1]
downloading image: calico/kube-controllers:v3.23.2
00:08:41 UTC message: [kubesphere-worker-1]
downloading image: calico/pod2daemon-flexvol:v3.23.2
00:08:42 UTC message: [kubesphere-master-1]
downloading image: calico/cni:v3.23.2
00:08:44 UTC message: [kubesphere-master-1]
downloading image: calico/node:v3.23.2
00:08:45 UTC message: [kubesphere-master-1]
downloading image: calico/pod2daemon-flexvol:v3.23.2
00:08:47 UTC success: [kubesphere-worker-1]
00:08:47 UTC success: [kubesphere-master-1]
00:08:47 UTC [ProgressiveUpgradeModule 1/2] Synchronize kubernetes binaries
00:08:51 UTC success: [kubesphere-master-1]
00:08:51 UTC success: [kubesphere-worker-1]
00:08:51 UTC [ProgressiveUpgradeModule 1/2] Upgrade cluster on master
00:10:28 UTC success: [kubesphere-master-1]
00:10:28 UTC [ProgressiveUpgradeModule 1/2] Get kubernetes cluster status
00:10:28 UTC stdout: [kubesphere-master-1]
v1.24.1
00:10:28 UTC stdout: [kubesphere-master-1]
kubesphere-master-1   v1.24.1    [map[address:192.168.122.151 type:InternalIP] map[address:kubesphere-master-1 type:Hostname]]
kubesphere-worker-1   v1.23.10   [map[address:192.168.122.181 type:InternalIP] map[address:kubesphere-worker-1 type:Hostname]]
00:10:29 UTC stdout: [kubesphere-master-1]
W0914 00:10:28.933821   12738 common.go:83] your configuration file uses a deprecated API spec: "kubeadm.k8s.io/v1beta2". Please use 'kubeadm config migrate --old-config old.yaml --new-config new.yaml', which will write the new, similar spec using a newer API version.
W0914 00:10:28.934596   12738 common.go:83] your configuration file uses a deprecated API spec: "kubeadm.k8s.io/v1beta2". Please use 'kubeadm config migrate --old-config old.yaml --new-config new.yaml', which will write the new, similar spec using a newer API version.
W0914 00:10:28.935975   12738 utils.go:69] The recommended value for "clusterDNS" in "KubeletConfiguration" is: [10.233.0.10]; the provided value is: [169.254.25.10]
[upload-certs] Storing the certificates in Secret "kubeadm-certs" in the "kube-system" Namespace
[upload-certs] Using certificate key:
2ac119eb1cc0b3e0224a4b32ca5feb52a3450a33c8dbc4990042fffddc2606fc
00:10:29 UTC stdout: [kubesphere-master-1]
secret/kubeadm-certs patched
00:10:29 UTC stdout: [kubesphere-master-1]
secret/kubeadm-certs patched
00:10:29 UTC stdout: [kubesphere-master-1]
secret/kubeadm-certs patched
00:10:29 UTC stdout: [kubesphere-master-1]
49kkur.2hsksziktc99aht4
00:10:29 UTC success: [kubesphere-master-1]
00:10:29 UTC [ProgressiveUpgradeModule 1/2] Upgrade cluster on worker
00:10:29 UTC stdout: [kubesphere-worker-1]
[upgrade] Reading configuration from the cluster...
[upgrade] FYI: You can look at this config file with 'kubectl -n kube-system get cm kubeadm-config -o yaml'
W0914 00:10:29.216391    8100 utils.go:69] The recommended value for "clusterDNS" in "KubeletConfiguration" is: [10.233.0.10]; the provided value is: [169.254.25.10]
[preflight] Running pre-flight checks
[preflight] Skipping prepull. Not a control plane node.
[upgrade] Skipping phase. Not a control plane node.
[kubelet-start] Writing kubelet configuration to file "/var/lib/kubelet/config.yaml"
[upgrade] The configuration for this node was successfully updated!
[upgrade] Now you should go ahead and upgrade the kubelet package using your package manager.
00:10:40 UTC skipped: [kubesphere-master-1]
00:10:40 UTC success: [kubesphere-worker-1]
00:10:40 UTC [ProgressiveUpgradeModule 1/2] Reconfigure CoreDNS
00:10:40 UTC stdout: [kubesphere-master-1]
deployment.apps/coredns patched (no change)
00:10:40 UTC stdout: [kubesphere-master-1]
service "kube-dns" deleted
00:10:40 UTC stdout: [kubesphere-master-1]
service/coredns unchanged
Warning: resource clusterroles/system:coredns is missing the kubectl.kubernetes.io/last-applied-configuration annotation which is required by kubectl apply. kubectl apply should only be used on resources created declaratively by either kubectl create --save-config or kubectl apply. The missing annotation will be patched automatically.
clusterrole.rbac.authorization.k8s.io/system:coredns configured
00:10:41 UTC stdout: [kubesphere-master-1]
Error from server (NotFound): services "kube-dns" not found
00:10:41 UTC stdout: [kubesphere-master-1]
service/coredns unchanged
clusterrole.rbac.authorization.k8s.io/system:coredns unchanged
00:10:41 UTC stdout: [kubesphere-master-1]
serviceaccount/nodelocaldns unchanged
daemonset.apps/nodelocaldns unchanged
00:10:41 UTC success: [kubesphere-master-1]
00:10:41 UTC [ProgressiveUpgradeModule 1/2] Set current k8s version
00:10:41 UTC success: [LocalHost]
00:10:41 UTC [SetUpgradePlanModule 2/2] Set upgrade plan
00:10:41 UTC success: [LocalHost]
00:10:41 UTC [SetUpgradePlanModule 2/2] Generate kubeadm config
00:10:41 UTC success: [kubesphere-master-1]
00:10:41 UTC [ProgressiveUpgradeModule 2/2] Calculate next upgrade version
00:10:41 UTC skipped: [LocalHost]
00:10:41 UTC [ProgressiveUpgradeModule 2/2] Download installation binaries
00:10:41 UTC skipped: [LocalHost]
00:10:41 UTC [ProgressiveUpgradeModule 2/2] Start to pull images on all nodes
00:10:41 UTC skipped: [kubesphere-worker-1]
00:10:41 UTC skipped: [kubesphere-master-1]
00:10:41 UTC [ProgressiveUpgradeModule 2/2] Synchronize kubernetes binaries
00:10:41 UTC skipped: [kubesphere-worker-1]
00:10:41 UTC skipped: [kubesphere-master-1]
00:10:41 UTC [ProgressiveUpgradeModule 2/2] Upgrade cluster on master
00:10:41 UTC skipped: [kubesphere-master-1]
00:10:41 UTC [ProgressiveUpgradeModule 2/2] Get kubernetes cluster status
00:10:41 UTC skipped: [kubesphere-master-1]
00:10:41 UTC [ProgressiveUpgradeModule 2/2] Upgrade cluster on worker
00:10:41 UTC skipped: [kubesphere-master-1]
00:10:41 UTC skipped: [kubesphere-worker-1]
00:10:41 UTC [ProgressiveUpgradeModule 2/2] Reconfigure CoreDNS
00:10:41 UTC skipped: [kubesphere-master-1]
00:10:41 UTC [ProgressiveUpgradeModule 2/2] Set current k8s version
00:10:41 UTC skipped: [LocalHost]
00:10:41 UTC [ChownModule] Chown user $HOME/.kube dir
00:10:41 UTC success: [kubesphere-worker-1]
00:10:41 UTC success: [kubesphere-master-1]
00:10:41 UTC [AutoRenewCertsModule] Generate k8s certs renew script
00:10:41 UTC success: [kubesphere-master-1]
00:10:41 UTC [AutoRenewCertsModule] Generate k8s certs renew service
00:10:41 UTC success: [kubesphere-master-1]
00:10:41 UTC [AutoRenewCertsModule] Generate k8s certs renew timer
00:10:41 UTC success: [kubesphere-master-1]
00:10:41 UTC [AutoRenewCertsModule] Enable k8s certs renew service
00:10:41 UTC success: [kubesphere-master-1]
00:10:41 UTC Pipeline[UpgradeClusterPipeline] execute successfully
04:19:21 UTC [GreetingsModule] Greetings
04:19:21 UTC message: [kubesphere-worker-1]
Greetings, KubeKey!
04:19:21 UTC message: [kubesphere-master-2]
Greetings, KubeKey!
04:19:21 UTC message: [kubesphere-master-1]
Greetings, KubeKey!
04:19:21 UTC success: [kubesphere-worker-1]
04:19:21 UTC success: [kubesphere-master-2]
04:19:21 UTC success: [kubesphere-master-1]
04:19:21 UTC [NodePreCheckModule] A pre-check on nodes
04:19:21 UTC success: [kubesphere-worker-1]
04:19:21 UTC success: [kubesphere-master-2]
04:19:21 UTC success: [kubesphere-master-1]
04:19:21 UTC [ClusterPreCheckModule] Get KubeConfig file
04:19:21 UTC skipped: [kubesphere-master-2]
04:19:21 UTC success: [kubesphere-master-1]
04:19:21 UTC [ClusterPreCheckModule] Get all nodes Kubernetes version
04:19:21 UTC success: [kubesphere-worker-1]
04:19:21 UTC success: [kubesphere-master-1]
04:19:21 UTC success: [kubesphere-master-2]
04:19:21 UTC [ClusterPreCheckModule] Calculate min Kubernetes version
04:19:21 UTC skipped: [kubesphere-master-2]
04:19:21 UTC success: [kubesphere-master-1]
04:19:21 UTC [ClusterPreCheckModule] Check desired Kubernetes version
04:19:21 UTC skipped: [kubesphere-master-2]
04:19:21 UTC success: [kubesphere-master-1]
04:19:21 UTC [ClusterPreCheckModule] Check KubeSphere version
04:19:22 UTC skipped: [kubesphere-master-2]
04:19:22 UTC success: [kubesphere-master-1]
04:19:22 UTC [ClusterPreCheckModule] Check dependency matrix for KubeSphere and Kubernetes
04:19:22 UTC skipped: [kubesphere-master-2]
04:19:22 UTC skipped: [kubesphere-master-1]
04:19:22 UTC [ClusterPreCheckModule] Get kubernetes nodes status
04:19:23 UTC skipped: [kubesphere-master-2]
04:19:23 UTC success: [kubesphere-master-1]
04:19:23 UTC [SetUpgradePlanModule 1/2] Set upgrade plan
04:19:23 UTC success: [LocalHost]
04:19:23 UTC [SetUpgradePlanModule 1/2] Generate kubeadm config
04:19:23 UTC skipped: [kubesphere-master-2]
04:19:23 UTC success: [kubesphere-master-1]
04:19:23 UTC [ProgressiveUpgradeModule 1/2] Calculate next upgrade version
04:19:23 UTC skipped: [LocalHost]
04:19:23 UTC [ProgressiveUpgradeModule 1/2] Download installation binaries
04:19:23 UTC skipped: [LocalHost]
04:19:23 UTC [ProgressiveUpgradeModule 1/2] Start to pull images on all nodes
04:19:23 UTC skipped: [kubesphere-worker-1]
04:19:23 UTC skipped: [kubesphere-master-2]
04:19:23 UTC skipped: [kubesphere-master-1]
04:19:23 UTC [ProgressiveUpgradeModule 1/2] Synchronize kubernetes binaries
04:19:23 UTC skipped: [kubesphere-worker-1]
04:19:23 UTC skipped: [kubesphere-master-1]
04:19:23 UTC skipped: [kubesphere-master-2]
04:19:23 UTC [ProgressiveUpgradeModule 1/2] Upgrade cluster on master
04:19:23 UTC skipped: [kubesphere-master-1]
04:19:23 UTC skipped: [kubesphere-master-2]
04:19:23 UTC [ProgressiveUpgradeModule 1/2] Get kubernetes cluster status
04:19:23 UTC skipped: [kubesphere-master-1]
04:19:23 UTC skipped: [kubesphere-master-2]
04:19:23 UTC [ProgressiveUpgradeModule 1/2] Upgrade cluster on worker
04:19:23 UTC skipped: [kubesphere-master-2]
04:19:23 UTC skipped: [kubesphere-worker-1]
04:19:23 UTC [ProgressiveUpgradeModule 1/2] Reconfigure CoreDNS
04:19:23 UTC skipped: [kubesphere-master-1]
04:19:23 UTC skipped: [kubesphere-master-2]
04:19:23 UTC [ProgressiveUpgradeModule 1/2] Set current k8s version
04:19:23 UTC skipped: [LocalHost]
04:19:23 UTC [SetUpgradePlanModule 2/2] Set upgrade plan
04:19:23 UTC success: [LocalHost]
04:19:23 UTC [SetUpgradePlanModule 2/2] Generate kubeadm config
04:19:23 UTC skipped: [kubesphere-master-2]
04:19:23 UTC success: [kubesphere-master-1]
04:19:23 UTC [ProgressiveUpgradeModule 2/2] Calculate next upgrade version
04:19:23 UTC skipped: [LocalHost]
04:19:23 UTC [ProgressiveUpgradeModule 2/2] Download installation binaries
04:19:23 UTC skipped: [LocalHost]
04:19:23 UTC [ProgressiveUpgradeModule 2/2] Start to pull images on all nodes
04:19:23 UTC skipped: [kubesphere-worker-1]
04:19:23 UTC skipped: [kubesphere-master-1]
04:19:23 UTC skipped: [kubesphere-master-2]
04:19:23 UTC [ProgressiveUpgradeModule 2/2] Synchronize kubernetes binaries
04:19:23 UTC skipped: [kubesphere-worker-1]
04:19:23 UTC skipped: [kubesphere-master-2]
04:19:23 UTC skipped: [kubesphere-master-1]
04:19:23 UTC [ProgressiveUpgradeModule 2/2] Upgrade cluster on master
04:19:23 UTC skipped: [kubesphere-master-1]
04:19:23 UTC skipped: [kubesphere-master-2]
04:19:23 UTC [ProgressiveUpgradeModule 2/2] Get kubernetes cluster status
04:19:23 UTC skipped: [kubesphere-master-1]
04:19:23 UTC skipped: [kubesphere-master-2]
04:19:23 UTC [ProgressiveUpgradeModule 2/2] Upgrade cluster on worker
04:19:23 UTC skipped: [kubesphere-master-2]
04:19:23 UTC skipped: [kubesphere-worker-1]
04:19:23 UTC [ProgressiveUpgradeModule 2/2] Reconfigure CoreDNS
04:19:23 UTC skipped: [kubesphere-master-1]
04:19:23 UTC skipped: [kubesphere-master-2]
04:19:23 UTC [ProgressiveUpgradeModule 2/2] Set current k8s version
04:19:23 UTC skipped: [LocalHost]
04:19:23 UTC [ChownModule] Chown user $HOME/.kube dir
04:19:23 UTC success: [kubesphere-worker-1]
04:19:23 UTC success: [kubesphere-master-2]
04:19:23 UTC success: [kubesphere-master-1]
04:19:23 UTC [AutoRenewCertsModule] Generate k8s certs renew script
04:19:23 UTC success: [kubesphere-master-2]
04:19:23 UTC success: [kubesphere-master-1]
04:19:23 UTC [AutoRenewCertsModule] Generate k8s certs renew service
04:19:23 UTC success: [kubesphere-master-2]
04:19:23 UTC success: [kubesphere-master-1]
04:19:23 UTC [AutoRenewCertsModule] Generate k8s certs renew timer
04:19:23 UTC success: [kubesphere-master-2]
04:19:23 UTC success: [kubesphere-master-1]
04:19:23 UTC [AutoRenewCertsModule] Enable k8s certs renew service
04:19:23 UTC success: [kubesphere-master-2]
04:19:23 UTC success: [kubesphere-master-1]
04:19:23 UTC Pipeline[UpgradeClusterPipeline] execute successfully
04:21:05 UTC [GreetingsModule] Greetings
04:21:05 UTC message: [kubesphere-worker-1]
Greetings, KubeKey!
04:21:05 UTC message: [kubesphere-master-1]
Greetings, KubeKey!
04:21:05 UTC message: [kubesphere-master-2]
Greetings, KubeKey!
04:21:05 UTC success: [kubesphere-worker-1]
04:21:05 UTC success: [kubesphere-master-1]
04:21:05 UTC success: [kubesphere-master-2]
04:21:05 UTC [NodePreCheckModule] A pre-check on nodes
04:21:06 UTC success: [kubesphere-worker-1]
04:21:06 UTC success: [kubesphere-master-1]
04:21:06 UTC success: [kubesphere-master-2]
04:21:06 UTC [ClusterPreCheckModule] Get KubeConfig file
04:21:06 UTC skipped: [kubesphere-master-2]
04:21:06 UTC success: [kubesphere-master-1]
04:21:06 UTC [ClusterPreCheckModule] Get all nodes Kubernetes version
04:21:06 UTC success: [kubesphere-worker-1]
04:21:06 UTC success: [kubesphere-master-2]
04:21:06 UTC success: [kubesphere-master-1]
04:21:06 UTC [ClusterPreCheckModule] Calculate min Kubernetes version
04:21:06 UTC skipped: [kubesphere-master-2]
04:21:06 UTC success: [kubesphere-master-1]
04:21:06 UTC [ClusterPreCheckModule] Check desired Kubernetes version
04:21:06 UTC skipped: [kubesphere-master-2]
04:21:06 UTC success: [kubesphere-master-1]
04:21:06 UTC [ClusterPreCheckModule] Check KubeSphere version
04:21:06 UTC skipped: [kubesphere-master-2]
04:21:06 UTC success: [kubesphere-master-1]
04:21:06 UTC [ClusterPreCheckModule] Check dependency matrix for KubeSphere and Kubernetes
04:21:06 UTC skipped: [kubesphere-master-2]
04:21:06 UTC skipped: [kubesphere-master-1]
04:21:06 UTC [ClusterPreCheckModule] Get kubernetes nodes status
04:21:06 UTC skipped: [kubesphere-master-2]
04:21:06 UTC success: [kubesphere-master-1]
04:21:06 UTC [SetUpgradePlanModule 1/2] Set upgrade plan
04:21:06 UTC success: [LocalHost]
04:21:06 UTC [SetUpgradePlanModule 1/2] Generate kubeadm config
04:21:06 UTC skipped: [kubesphere-master-2]
04:21:06 UTC success: [kubesphere-master-1]
04:21:06 UTC [ProgressiveUpgradeModule 1/2] Calculate next upgrade version
04:21:06 UTC skipped: [LocalHost]
04:21:06 UTC [ProgressiveUpgradeModule 1/2] Download installation binaries
04:21:06 UTC skipped: [LocalHost]
04:21:06 UTC [ProgressiveUpgradeModule 1/2] Start to pull images on all nodes
04:21:06 UTC skipped: [kubesphere-worker-1]
04:21:06 UTC skipped: [kubesphere-master-1]
04:21:06 UTC skipped: [kubesphere-master-2]
04:21:06 UTC [ProgressiveUpgradeModule 1/2] Synchronize kubernetes binaries
04:21:06 UTC skipped: [kubesphere-worker-1]
04:21:06 UTC skipped: [kubesphere-master-1]
04:21:06 UTC skipped: [kubesphere-master-2]
04:21:06 UTC [ProgressiveUpgradeModule 1/2] Upgrade cluster on master
04:21:06 UTC skipped: [kubesphere-master-1]
04:21:06 UTC skipped: [kubesphere-master-2]
04:21:06 UTC [ProgressiveUpgradeModule 1/2] Get kubernetes cluster status
04:21:06 UTC skipped: [kubesphere-master-1]
04:21:06 UTC skipped: [kubesphere-master-2]
04:21:06 UTC [ProgressiveUpgradeModule 1/2] Upgrade cluster on worker
04:21:06 UTC skipped: [kubesphere-master-2]
04:21:06 UTC skipped: [kubesphere-worker-1]
04:21:06 UTC [ProgressiveUpgradeModule 1/2] Reconfigure CoreDNS
04:21:06 UTC skipped: [kubesphere-master-1]
04:21:06 UTC skipped: [kubesphere-master-2]
04:21:06 UTC [ProgressiveUpgradeModule 1/2] Set current k8s version
04:21:06 UTC skipped: [LocalHost]
04:21:06 UTC [SetUpgradePlanModule 2/2] Set upgrade plan
04:21:06 UTC success: [LocalHost]
04:21:06 UTC [SetUpgradePlanModule 2/2] Generate kubeadm config
04:21:06 UTC skipped: [kubesphere-master-2]
04:21:06 UTC success: [kubesphere-master-1]
04:21:06 UTC [ProgressiveUpgradeModule 2/2] Calculate next upgrade version
04:21:06 UTC skipped: [LocalHost]
04:21:06 UTC [ProgressiveUpgradeModule 2/2] Download installation binaries
04:21:06 UTC skipped: [LocalHost]
04:21:06 UTC [ProgressiveUpgradeModule 2/2] Start to pull images on all nodes
04:21:06 UTC skipped: [kubesphere-worker-1]
04:21:06 UTC skipped: [kubesphere-master-2]
04:21:06 UTC skipped: [kubesphere-master-1]
04:21:06 UTC [ProgressiveUpgradeModule 2/2] Synchronize kubernetes binaries
04:21:06 UTC skipped: [kubesphere-worker-1]
04:21:06 UTC skipped: [kubesphere-master-1]
04:21:06 UTC skipped: [kubesphere-master-2]
04:21:06 UTC [ProgressiveUpgradeModule 2/2] Upgrade cluster on master
04:21:06 UTC skipped: [kubesphere-master-1]
04:21:06 UTC skipped: [kubesphere-master-2]
04:21:06 UTC [ProgressiveUpgradeModule 2/2] Get kubernetes cluster status
04:21:06 UTC skipped: [kubesphere-master-1]
04:21:06 UTC skipped: [kubesphere-master-2]
04:21:06 UTC [ProgressiveUpgradeModule 2/2] Upgrade cluster on worker
04:21:06 UTC skipped: [kubesphere-master-2]
04:21:06 UTC skipped: [kubesphere-worker-1]
04:21:06 UTC [ProgressiveUpgradeModule 2/2] Reconfigure CoreDNS
04:21:06 UTC skipped: [kubesphere-master-1]
04:21:06 UTC skipped: [kubesphere-master-2]
04:21:06 UTC [ProgressiveUpgradeModule 2/2] Set current k8s version
04:21:06 UTC skipped: [LocalHost]
04:21:06 UTC [ChownModule] Chown user $HOME/.kube dir
04:21:06 UTC success: [kubesphere-worker-1]
04:21:06 UTC success: [kubesphere-master-1]
04:21:06 UTC success: [kubesphere-master-2]
04:21:06 UTC [AutoRenewCertsModule] Generate k8s certs renew script
04:21:06 UTC success: [kubesphere-master-2]
04:21:06 UTC success: [kubesphere-master-1]
04:21:06 UTC [AutoRenewCertsModule] Generate k8s certs renew service
04:21:06 UTC success: [kubesphere-master-2]
04:21:06 UTC success: [kubesphere-master-1]
04:21:06 UTC [AutoRenewCertsModule] Generate k8s certs renew timer
04:21:06 UTC success: [kubesphere-master-1]
04:21:06 UTC success: [kubesphere-master-2]
04:21:06 UTC [AutoRenewCertsModule] Enable k8s certs renew service
04:21:07 UTC success: [kubesphere-master-2]
04:21:07 UTC success: [kubesphere-master-1]
04:21:07 UTC Pipeline[UpgradeClusterPipeline] execute successfully
04:24:17 UTC [GreetingsModule] Greetings
04:24:17 UTC message: [kubesphere-worker-1]
Greetings, KubeKey!
04:24:18 UTC message: [kubesphere-master-1]
Greetings, KubeKey!
04:24:18 UTC message: [kubesphere-master-2]
Greetings, KubeKey!
04:24:18 UTC success: [kubesphere-worker-1]
04:24:18 UTC success: [kubesphere-master-1]
04:24:18 UTC success: [kubesphere-master-2]
04:24:18 UTC [NodePreCheckModule] A pre-check on nodes
04:24:18 UTC success: [kubesphere-worker-1]
04:24:18 UTC success: [kubesphere-master-2]
04:24:18 UTC success: [kubesphere-master-1]
04:24:18 UTC [ClusterPreCheckModule] Get KubeConfig file
04:24:18 UTC skipped: [kubesphere-master-2]
04:24:18 UTC success: [kubesphere-master-1]
04:24:18 UTC [ClusterPreCheckModule] Get all nodes Kubernetes version
04:24:18 UTC success: [kubesphere-master-2]
04:24:18 UTC success: [kubesphere-worker-1]
04:24:18 UTC success: [kubesphere-master-1]
04:24:18 UTC [ClusterPreCheckModule] Calculate min Kubernetes version
04:24:18 UTC skipped: [kubesphere-master-2]
04:24:18 UTC success: [kubesphere-master-1]
04:24:18 UTC [ClusterPreCheckModule] Check desired Kubernetes version
04:24:18 UTC skipped: [kubesphere-master-2]
04:24:18 UTC success: [kubesphere-master-1]
04:24:18 UTC [ClusterPreCheckModule] Check KubeSphere version
04:24:19 UTC skipped: [kubesphere-master-2]
04:24:19 UTC success: [kubesphere-master-1]
04:24:19 UTC [ClusterPreCheckModule] Check dependency matrix for KubeSphere and Kubernetes
04:24:19 UTC skipped: [kubesphere-master-2]
04:24:19 UTC skipped: [kubesphere-master-1]
04:24:19 UTC [ClusterPreCheckModule] Get kubernetes nodes status
04:24:19 UTC skipped: [kubesphere-master-2]
04:24:19 UTC success: [kubesphere-master-1]
04:24:19 UTC [SetUpgradePlanModule 1/2] Set upgrade plan
04:24:19 UTC success: [LocalHost]
04:24:19 UTC [SetUpgradePlanModule 1/2] Generate kubeadm config
04:24:19 UTC skipped: [kubesphere-master-2]
04:24:19 UTC success: [kubesphere-master-1]
04:24:19 UTC [ProgressiveUpgradeModule 1/2] Calculate next upgrade version
04:24:19 UTC success: [LocalHost]
04:24:19 UTC [ProgressiveUpgradeModule 1/2] Download installation binaries
04:24:19 UTC message: [localhost]
downloading amd64 kubeadm v1.24.1 ...
04:24:19 UTC message: [localhost]
kubeadm is existed
04:24:19 UTC message: [localhost]
downloading amd64 kubelet v1.24.1 ...
04:24:19 UTC message: [localhost]
kubelet is existed
04:24:19 UTC message: [localhost]
downloading amd64 kubectl v1.24.1 ...
04:24:19 UTC message: [localhost]
kubectl is existed
04:24:19 UTC message: [localhost]
downloading amd64 helm v3.9.0 ...
04:24:19 UTC message: [localhost]
helm is existed
04:24:19 UTC message: [localhost]
downloading amd64 kubecni v1.2.0 ...
04:24:19 UTC message: [localhost]
kubecni is existed
04:24:19 UTC message: [localhost]
downloading amd64 crictl v1.24.0 ...
04:24:20 UTC message: [localhost]
crictl is existed
04:24:20 UTC message: [localhost]
downloading amd64 etcd v3.4.13 ...
04:24:20 UTC message: [localhost]
etcd is existed
04:24:20 UTC message: [localhost]
downloading amd64 containerd 1.6.4 ...
04:24:20 UTC message: [localhost]
containerd is existed
04:24:20 UTC message: [localhost]
downloading amd64 runc v1.1.1 ...
04:24:20 UTC message: [localhost]
runc is existed
04:24:20 UTC message: [localhost]
downloading amd64 calicoctl v3.23.2 ...
04:24:20 UTC message: [localhost]
calicoctl is existed
04:24:20 UTC success: [LocalHost]
04:24:20 UTC [ProgressiveUpgradeModule 1/2] Start to pull images on all nodes
04:24:20 UTC message: [kubesphere-worker-1]
downloading image: kubesphere/pause:3.7
04:24:20 UTC message: [kubesphere-master-1]
downloading image: kubesphere/pause:3.7
04:24:20 UTC message: [kubesphere-master-2]
downloading image: kubesphere/pause:3.7
04:24:24 UTC message: [kubesphere-worker-1]
downloading image: kubesphere/kube-proxy:v1.24.1
04:24:24 UTC message: [kubesphere-master-1]
downloading image: kubesphere/kube-apiserver:v1.24.1
04:24:24 UTC message: [kubesphere-master-2]
downloading image: kubesphere/kube-apiserver:v1.24.1
04:24:25 UTC message: [kubesphere-worker-1]
downloading image: coredns/coredns:1.8.6
04:24:26 UTC message: [kubesphere-master-1]
downloading image: kubesphere/kube-controller-manager:v1.24.1
04:24:26 UTC message: [kubesphere-master-2]
downloading image: kubesphere/kube-controller-manager:v1.24.1
04:24:27 UTC message: [kubesphere-worker-1]
downloading image: kubesphere/k8s-dns-node-cache:1.15.12
04:24:27 UTC message: [kubesphere-master-1]
downloading image: kubesphere/kube-scheduler:v1.24.1
04:24:27 UTC message: [kubesphere-master-2]
downloading image: kubesphere/kube-scheduler:v1.24.1
04:24:28 UTC message: [kubesphere-worker-1]
downloading image: calico/kube-controllers:v3.23.2
04:24:29 UTC message: [kubesphere-master-1]
downloading image: kubesphere/kube-proxy:v1.24.1
04:24:29 UTC message: [kubesphere-master-2]
downloading image: kubesphere/kube-proxy:v1.24.1
04:24:30 UTC message: [kubesphere-worker-1]
downloading image: calico/cni:v3.23.2
04:24:30 UTC message: [kubesphere-master-1]
downloading image: coredns/coredns:1.8.6
04:24:30 UTC message: [kubesphere-master-2]
downloading image: coredns/coredns:1.8.6
04:24:32 UTC message: [kubesphere-worker-1]
downloading image: calico/node:v3.23.2
04:24:32 UTC message: [kubesphere-master-1]
downloading image: kubesphere/k8s-dns-node-cache:1.15.12
04:24:32 UTC message: [kubesphere-master-2]
downloading image: kubesphere/k8s-dns-node-cache:1.15.12
04:24:33 UTC message: [kubesphere-worker-1]
downloading image: calico/pod2daemon-flexvol:v3.23.2
04:24:33 UTC message: [kubesphere-master-1]
downloading image: calico/kube-controllers:v3.23.2
04:24:33 UTC message: [kubesphere-master-2]
downloading image: calico/kube-controllers:v3.23.2
04:24:35 UTC message: [kubesphere-master-1]
downloading image: calico/cni:v3.23.2
04:24:35 UTC message: [kubesphere-master-2]
downloading image: calico/cni:v3.23.2
04:24:36 UTC message: [kubesphere-master-2]
downloading image: calico/node:v3.23.2
04:24:37 UTC message: [kubesphere-master-1]
downloading image: calico/node:v3.23.2
04:24:38 UTC message: [kubesphere-master-2]
downloading image: calico/pod2daemon-flexvol:v3.23.2
04:24:38 UTC message: [kubesphere-master-1]
downloading image: calico/pod2daemon-flexvol:v3.23.2
04:24:40 UTC success: [kubesphere-worker-1]
04:24:40 UTC success: [kubesphere-master-2]
04:24:40 UTC success: [kubesphere-master-1]
04:24:40 UTC [ProgressiveUpgradeModule 1/2] Synchronize kubernetes binaries
04:24:44 UTC success: [kubesphere-master-2]
04:24:44 UTC success: [kubesphere-worker-1]
04:24:44 UTC success: [kubesphere-master-1]
04:24:44 UTC [ProgressiveUpgradeModule 1/2] Upgrade cluster on master
04:26:23 UTC message: [kubesphere-master-2]
upgrade master failed: kubesphere-master-2: Failed to exec command: sudo -E /bin/bash -c "timeout -k 600s 600s /usr/local/bin/kubeadm upgrade apply v1.24.1 -y --ignore-preflight-errors=all --allow-experimental-upgrades --allow-release-candidate-upgrades --etcd-upgrade=false --certificate-renewal=true " 
[upgrade/config] Making sure the configuration is correct:
[upgrade/config] Reading configuration from the cluster...
[upgrade/config] FYI: You can look at this config file with 'kubectl -n kube-system get cm kubeadm-config -o yaml'
[upgrade/config] FATAL: failed to get config map: Get "https://lb.kubesphere.local:6443/api/v1/namespaces/kube-system/configmaps/kubeadm-config?timeout=10s": dial tcp 192.168.122.151:6443: connect: connection refused
To see the stack trace of this error execute with --v=5 or higher: Process exited with status 1
04:26:23 UTC retry: [kubesphere-master-2]
04:42:18 UTC [GreetingsModule] Greetings
04:42:18 UTC message: [kubesphere-worker-1]
Greetings, KubeKey!
04:42:18 UTC message: [kubesphere-master-1]
Greetings, KubeKey!
04:42:18 UTC message: [kubesphere-master-2]
Greetings, KubeKey!
04:42:18 UTC success: [kubesphere-worker-1]
04:42:18 UTC success: [kubesphere-master-1]
04:42:18 UTC success: [kubesphere-master-2]
04:42:18 UTC [NodePreCheckModule] A pre-check on nodes
04:42:19 UTC success: [kubesphere-worker-1]
04:42:19 UTC success: [kubesphere-master-2]
04:42:19 UTC success: [kubesphere-master-1]
04:42:19 UTC [ClusterPreCheckModule] Get KubeConfig file
04:42:19 UTC skipped: [kubesphere-master-2]
04:42:19 UTC success: [kubesphere-master-1]
04:42:19 UTC [ClusterPreCheckModule] Get all nodes Kubernetes version
04:42:19 UTC success: [kubesphere-worker-1]
04:42:19 UTC success: [kubesphere-master-2]
04:42:19 UTC success: [kubesphere-master-1]
04:42:19 UTC [ClusterPreCheckModule] Calculate min Kubernetes version
04:42:19 UTC skipped: [kubesphere-master-2]
04:42:19 UTC success: [kubesphere-master-1]
04:42:19 UTC [ClusterPreCheckModule] Check desired Kubernetes version
04:42:19 UTC skipped: [kubesphere-master-2]
04:42:19 UTC success: [kubesphere-master-1]
04:42:19 UTC [ClusterPreCheckModule] Check KubeSphere version
04:42:19 UTC skipped: [kubesphere-master-2]
04:42:19 UTC success: [kubesphere-master-1]
04:42:19 UTC [ClusterPreCheckModule] Check dependency matrix for KubeSphere and Kubernetes
04:42:19 UTC skipped: [kubesphere-master-2]
04:42:19 UTC skipped: [kubesphere-master-1]
04:42:19 UTC [ClusterPreCheckModule] Get kubernetes nodes status
04:42:19 UTC skipped: [kubesphere-master-2]
04:42:19 UTC success: [kubesphere-master-1]
04:42:19 UTC [SetUpgradePlanModule 1/2] Set upgrade plan
04:42:19 UTC success: [LocalHost]
04:42:19 UTC [SetUpgradePlanModule 1/2] Generate kubeadm config
04:42:19 UTC skipped: [kubesphere-master-2]
04:42:19 UTC success: [kubesphere-master-1]
04:42:19 UTC [ProgressiveUpgradeModule 1/2] Calculate next upgrade version
04:42:19 UTC success: [LocalHost]
04:42:19 UTC [ProgressiveUpgradeModule 1/2] Download installation binaries
04:42:19 UTC message: [localhost]
downloading amd64 kubeadm v1.24.1 ...
04:42:19 UTC message: [localhost]
kubeadm is existed
04:42:19 UTC message: [localhost]
downloading amd64 kubelet v1.24.1 ...
04:42:20 UTC message: [localhost]
kubelet is existed
04:42:20 UTC message: [localhost]
downloading amd64 kubectl v1.24.1 ...
04:42:20 UTC message: [localhost]
kubectl is existed
04:42:20 UTC message: [localhost]
downloading amd64 helm v3.9.0 ...
04:42:20 UTC message: [localhost]
helm is existed
04:42:20 UTC message: [localhost]
downloading amd64 kubecni v1.2.0 ...
04:42:20 UTC message: [localhost]
kubecni is existed
04:42:20 UTC message: [localhost]
downloading amd64 crictl v1.24.0 ...
04:42:20 UTC message: [localhost]
crictl is existed
04:42:20 UTC message: [localhost]
downloading amd64 etcd v3.4.13 ...
04:42:20 UTC message: [localhost]
etcd is existed
04:42:20 UTC message: [localhost]
downloading amd64 containerd 1.6.4 ...
04:42:20 UTC message: [localhost]
containerd is existed
04:42:20 UTC message: [localhost]
downloading amd64 runc v1.1.1 ...
04:42:20 UTC message: [localhost]
runc is existed
04:42:20 UTC message: [localhost]
downloading amd64 calicoctl v3.23.2 ...
04:42:20 UTC message: [localhost]
calicoctl is existed
04:42:20 UTC success: [LocalHost]
04:42:20 UTC [ProgressiveUpgradeModule 1/2] Start to pull images on all nodes
04:42:20 UTC message: [kubesphere-worker-1]
downloading image: kubesphere/pause:3.7
04:42:20 UTC message: [kubesphere-master-1]
downloading image: kubesphere/pause:3.7
04:42:20 UTC message: [kubesphere-master-2]
downloading image: kubesphere/pause:3.7
04:42:24 UTC message: [kubesphere-worker-1]
downloading image: kubesphere/kube-proxy:v1.24.1
04:42:25 UTC message: [kubesphere-master-1]
downloading image: kubesphere/kube-apiserver:v1.24.1
04:42:25 UTC message: [kubesphere-master-2]
downloading image: kubesphere/kube-apiserver:v1.24.1
04:42:26 UTC message: [kubesphere-worker-1]
downloading image: coredns/coredns:1.8.6
04:42:26 UTC message: [kubesphere-master-1]
downloading image: kubesphere/kube-controller-manager:v1.24.1
04:42:26 UTC message: [kubesphere-master-2]
downloading image: kubesphere/kube-controller-manager:v1.24.1
04:42:27 UTC message: [kubesphere-worker-1]
downloading image: kubesphere/k8s-dns-node-cache:1.15.12
04:42:28 UTC message: [kubesphere-master-2]
downloading image: kubesphere/kube-scheduler:v1.24.1
04:42:28 UTC message: [kubesphere-master-1]
downloading image: kubesphere/kube-scheduler:v1.24.1
04:42:29 UTC message: [kubesphere-worker-1]
downloading image: calico/kube-controllers:v3.23.2
04:42:29 UTC message: [kubesphere-master-1]
downloading image: kubesphere/kube-proxy:v1.24.1
04:42:29 UTC message: [kubesphere-master-2]
downloading image: kubesphere/kube-proxy:v1.24.1
04:42:30 UTC message: [kubesphere-worker-1]
downloading image: calico/cni:v3.23.2
04:42:31 UTC message: [kubesphere-master-1]
downloading image: coredns/coredns:1.8.6
04:42:31 UTC message: [kubesphere-master-2]
downloading image: coredns/coredns:1.8.6
04:42:32 UTC message: [kubesphere-worker-1]
downloading image: calico/node:v3.23.2
04:42:32 UTC message: [kubesphere-master-1]
downloading image: kubesphere/k8s-dns-node-cache:1.15.12
04:42:32 UTC message: [kubesphere-master-2]
downloading image: kubesphere/k8s-dns-node-cache:1.15.12
04:42:34 UTC message: [kubesphere-master-2]
downloading image: calico/kube-controllers:v3.23.2
04:42:34 UTC message: [kubesphere-master-1]
downloading image: calico/kube-controllers:v3.23.2
04:42:34 UTC message: [kubesphere-worker-1]
downloading image: calico/pod2daemon-flexvol:v3.23.2
04:42:35 UTC message: [kubesphere-master-2]
downloading image: calico/cni:v3.23.2
04:42:35 UTC message: [kubesphere-master-1]
downloading image: calico/cni:v3.23.2
04:42:37 UTC message: [kubesphere-master-2]
downloading image: calico/node:v3.23.2
04:42:37 UTC message: [kubesphere-master-1]
downloading image: calico/node:v3.23.2
04:42:38 UTC message: [kubesphere-master-2]
downloading image: calico/pod2daemon-flexvol:v3.23.2
04:42:39 UTC message: [kubesphere-master-1]
downloading image: calico/pod2daemon-flexvol:v3.23.2
04:42:40 UTC success: [kubesphere-worker-1]
04:42:40 UTC success: [kubesphere-master-2]
04:42:40 UTC success: [kubesphere-master-1]
04:42:40 UTC [ProgressiveUpgradeModule 1/2] Synchronize kubernetes binaries
04:42:45 UTC success: [kubesphere-master-2]
04:42:45 UTC success: [kubesphere-worker-1]
04:42:45 UTC success: [kubesphere-master-1]
04:42:45 UTC [ProgressiveUpgradeModule 1/2] Upgrade cluster on master
04:45:53 UTC success: [kubesphere-master-1]
04:45:53 UTC success: [kubesphere-master-2]
04:45:53 UTC [ProgressiveUpgradeModule 1/2] Get kubernetes cluster status
04:45:53 UTC stdout: [kubesphere-master-1]
v1.24.1
04:45:53 UTC stdout: [kubesphere-master-1]
kubesphere-master-1   v1.24.1    [map[address:192.168.122.151 type:InternalIP] map[address:kubesphere-master-1 type:Hostname]]
kubesphere-master-2   v1.24.1    [map[address:192.168.122.152 type:InternalIP] map[address:kubesphere-master-2 type:Hostname]]
kubesphere-worker-1   v1.23.10   [map[address:192.168.122.181 type:InternalIP] map[address:kubesphere-worker-1 type:Hostname]]
04:45:53 UTC stdout: [kubesphere-master-1]
W0914 04:45:53.270083   14342 common.go:83] your configuration file uses a deprecated API spec: "kubeadm.k8s.io/v1beta2". Please use 'kubeadm config migrate --old-config old.yaml --new-config new.yaml', which will write the new, similar spec using a newer API version.
W0914 04:45:53.270968   14342 common.go:83] your configuration file uses a deprecated API spec: "kubeadm.k8s.io/v1beta2". Please use 'kubeadm config migrate --old-config old.yaml --new-config new.yaml', which will write the new, similar spec using a newer API version.
W0914 04:45:53.272521   14342 utils.go:69] The recommended value for "clusterDNS" in "KubeletConfiguration" is: [10.233.0.10]; the provided value is: [169.254.25.10]
[upload-certs] Storing the certificates in Secret "kubeadm-certs" in the "kube-system" Namespace
[upload-certs] Using certificate key:
7cec8368504e6854f80556dbd718db42baf588fad4f042bec5775b3caec96be5
04:45:53 UTC stdout: [kubesphere-master-1]
secret/kubeadm-certs patched
04:45:53 UTC stdout: [kubesphere-master-1]
secret/kubeadm-certs patched
04:45:53 UTC stdout: [kubesphere-master-1]
secret/kubeadm-certs patched
04:45:53 UTC stdout: [kubesphere-master-1]
h9gb9s.wprn3701l2ailcg5
04:45:53 UTC stdout: [kubesphere-master-2]
v1.24.1
04:45:53 UTC stdout: [kubesphere-master-2]
kubesphere-master-1   v1.24.1    [map[address:192.168.122.151 type:InternalIP] map[address:kubesphere-master-1 type:Hostname]]
kubesphere-master-2   v1.24.1    [map[address:192.168.122.152 type:InternalIP] map[address:kubesphere-master-2 type:Hostname]]
kubesphere-worker-1   v1.23.10   [map[address:192.168.122.181 type:InternalIP] map[address:kubesphere-worker-1 type:Hostname]]
04:45:53 UTC success: [kubesphere-master-1]
04:45:53 UTC success: [kubesphere-master-2]
04:45:53 UTC [ProgressiveUpgradeModule 1/2] Upgrade cluster on worker
04:45:54 UTC stdout: [kubesphere-worker-1]
[upgrade] Reading configuration from the cluster...
[upgrade] FYI: You can look at this config file with 'kubectl -n kube-system get cm kubeadm-config -o yaml'
W0914 04:45:53.699483    9710 utils.go:69] The recommended value for "clusterDNS" in "KubeletConfiguration" is: [10.233.0.10]; the provided value is: [169.254.25.10]
[preflight] Running pre-flight checks
[preflight] Skipping prepull. Not a control plane node.
[upgrade] Skipping phase. Not a control plane node.
[kubelet-start] Writing kubelet configuration to file "/var/lib/kubelet/config.yaml"
[upgrade] The configuration for this node was successfully updated!
[upgrade] Now you should go ahead and upgrade the kubelet package using your package manager.
04:46:04 UTC skipped: [kubesphere-master-2]
04:46:04 UTC success: [kubesphere-worker-1]
04:46:04 UTC [ProgressiveUpgradeModule 1/2] Reconfigure CoreDNS
04:46:04 UTC stdout: [kubesphere-master-1]
deployment.apps/coredns patched (no change)
04:46:05 UTC stdout: [kubesphere-master-1]
service "kube-dns" deleted
04:46:05 UTC stdout: [kubesphere-master-1]
service/coredns unchanged
Warning: resource clusterroles/system:coredns is missing the kubectl.kubernetes.io/last-applied-configuration annotation which is required by kubectl apply. kubectl apply should only be used on resources created declaratively by either kubectl create --save-config or kubectl apply. The missing annotation will be patched automatically.
clusterrole.rbac.authorization.k8s.io/system:coredns configured
04:46:05 UTC stdout: [kubesphere-master-1]
Error from server (NotFound): services "kube-dns" not found
04:46:05 UTC stdout: [kubesphere-master-1]
service/coredns unchanged
clusterrole.rbac.authorization.k8s.io/system:coredns unchanged
04:46:05 UTC stdout: [kubesphere-master-1]
serviceaccount/nodelocaldns unchanged
daemonset.apps/nodelocaldns unchanged
04:46:05 UTC success: [kubesphere-master-1]
04:46:05 UTC skipped: [kubesphere-master-2]
04:46:05 UTC [ProgressiveUpgradeModule 1/2] Set current k8s version
04:46:05 UTC success: [LocalHost]
04:46:05 UTC [SetUpgradePlanModule 2/2] Set upgrade plan
04:46:05 UTC success: [LocalHost]
04:46:05 UTC [SetUpgradePlanModule 2/2] Generate kubeadm config
04:46:05 UTC skipped: [kubesphere-master-2]
04:46:05 UTC success: [kubesphere-master-1]
04:46:05 UTC [ProgressiveUpgradeModule 2/2] Calculate next upgrade version
04:46:05 UTC skipped: [LocalHost]
04:46:05 UTC [ProgressiveUpgradeModule 2/2] Download installation binaries
04:46:05 UTC skipped: [LocalHost]
04:46:05 UTC [ProgressiveUpgradeModule 2/2] Start to pull images on all nodes
04:46:05 UTC skipped: [kubesphere-worker-1]
04:46:05 UTC skipped: [kubesphere-master-1]
04:46:05 UTC skipped: [kubesphere-master-2]
04:46:05 UTC [ProgressiveUpgradeModule 2/2] Synchronize kubernetes binaries
04:46:05 UTC skipped: [kubesphere-worker-1]
04:46:05 UTC skipped: [kubesphere-master-2]
04:46:05 UTC skipped: [kubesphere-master-1]
04:46:05 UTC [ProgressiveUpgradeModule 2/2] Upgrade cluster on master
04:46:05 UTC skipped: [kubesphere-master-1]
04:46:05 UTC skipped: [kubesphere-master-2]
04:46:05 UTC [ProgressiveUpgradeModule 2/2] Get kubernetes cluster status
04:46:05 UTC skipped: [kubesphere-master-1]
04:46:05 UTC skipped: [kubesphere-master-2]
04:46:05 UTC [ProgressiveUpgradeModule 2/2] Upgrade cluster on worker
04:46:05 UTC skipped: [kubesphere-master-2]
04:46:05 UTC skipped: [kubesphere-worker-1]
04:46:05 UTC [ProgressiveUpgradeModule 2/2] Reconfigure CoreDNS
04:46:05 UTC skipped: [kubesphere-master-1]
04:46:05 UTC skipped: [kubesphere-master-2]
04:46:05 UTC [ProgressiveUpgradeModule 2/2] Set current k8s version
04:46:05 UTC skipped: [LocalHost]
04:46:05 UTC [ChownModule] Chown user $HOME/.kube dir
04:46:05 UTC success: [kubesphere-worker-1]
04:46:05 UTC success: [kubesphere-master-1]
04:46:05 UTC success: [kubesphere-master-2]
04:46:05 UTC [AutoRenewCertsModule] Generate k8s certs renew script
04:46:05 UTC success: [kubesphere-master-1]
04:46:05 UTC success: [kubesphere-master-2]
04:46:05 UTC [AutoRenewCertsModule] Generate k8s certs renew service
04:46:06 UTC success: [kubesphere-master-1]
04:46:06 UTC success: [kubesphere-master-2]
04:46:06 UTC [AutoRenewCertsModule] Generate k8s certs renew timer
04:46:06 UTC success: [kubesphere-master-1]
04:46:06 UTC success: [kubesphere-master-2]
04:46:06 UTC [AutoRenewCertsModule] Enable k8s certs renew service
04:46:06 UTC success: [kubesphere-master-2]
04:46:06 UTC success: [kubesphere-master-1]
04:46:06 UTC Pipeline[UpgradeClusterPipeline] execute successfully
